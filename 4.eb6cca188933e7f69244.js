(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"8Wf1":function(e,i,t){"use strict";t.r(i),t.d(i,"TransportFacilityModule",(function(){return y}));var d=t("ofXK"),o=t("3Pt+"),n=t("tyNb"),b=t("2Vo4"),r=t("IW2O"),s=t("fXoL");let c=(()=>{class e{constructor(){this.rides=r.a,this.sessionUser=sessionStorage.getItem("username"),this.changeRideCount=new b.a([]),this.getRides()}getRides(){const e=new Date,i=this.rides.filter(i=>Number(e.getHours()+1+"."+e.getMinutes())>=i.time&&Number(e.getHours()-1+"."+e.getMinutes())<=i.time);this.changeRideCount.next(i)}addRide(e){const i=this.rides.findIndex(e=>e.empId===this.sessionUser);-1!==i&&this.rides.splice(i,1),this.rides.push(e),this.getRides()}bookRideAction(e,i){this.rides.find(t=>{t.empId===e&&("book"===i?(t.vacantSeats--,t.bookedBy.push(sessionStorage.getItem("username"))):(t.vacantSeats++,t.bookedBy=t.bookedBy.filter(e=>e!==this.sessionUser)))}),this.getRides()}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=s.Db({token:e,factory:e.\u0275fac}),e})();function a(e,i){if(1&e){const e=s.Lb();s.Kb(0,"ul",6),s.Kb(1,"li"),s.dc(2,"Available Rides"),s.Jb(),s.Kb(3,"li",3),s.Rb("click",(function(){return s.Zb(e),s.Tb().showAddRide.emit(!0)})),s.dc(4,"Add Ride"),s.Jb(),s.Kb(5,"li",3),s.Rb("click",(function(){return s.Zb(e),s.Tb().logout()})),s.dc(6,"Logout"),s.Jb(),s.Jb()}}function l(e,i){if(1&e){const e=s.Lb();s.Kb(0,"div",7),s.Rb("click",(function(){return s.Zb(e),s.Tb().mobileMenu=!1})),s.Ib(1,"i",8),s.Jb()}}function u(e,i){if(1&e){const e=s.Lb();s.Kb(0,"div",7),s.Rb("click",(function(){return s.Zb(e),s.Tb().mobileMenu=!0})),s.Ib(1,"i",9),s.Jb()}}let m=(()=>{class e{constructor(e){this.router=e,this.mobileMenu=!0,this.showAddRide=new s.n}ngOnInit(){}logout(){sessionStorage.setItem("username",""),this.router.navigate([""])}}return e.\u0275fac=function(i){return new(i||e)(s.Hb(n.a))},e.\u0275cmp=s.Bb({type:e,selectors:[["app-navbar"]],outputs:{showAddRide:"showAddRide"},decls:12,vars:3,consts:[[1,"row"],["src","https://www.infrrd.ai/hs-fs/hubfs/infrrd_logo.png?width=200&name=infrrd_logo.png","alt","logo",1,"nav-logo"],[1,"main-nav"],[3,"click"],["class","main-nav-mobile",4,"ngIf"],["class","mobile-menu icon",3,"click",4,"ngIf"],[1,"main-nav-mobile"],[1,"mobile-menu","icon",3,"click"],[1,"fa","fa-bars"],[1,"fa","fa-times"]],template:function(e,i){1&e&&(s.Kb(0,"div",0),s.Ib(1,"img",1),s.Kb(2,"ul",2),s.Kb(3,"li"),s.dc(4,"Available Rides"),s.Jb(),s.Kb(5,"li",3),s.Rb("click",(function(){return i.showAddRide.emit(!0)})),s.dc(6,"Add Ride"),s.Jb(),s.Kb(7,"li",3),s.Rb("click",(function(){return i.logout()})),s.dc(8,"Logout"),s.Jb(),s.Jb(),s.cc(9,a,7,0,"ul",4),s.cc(10,l,2,0,"div",5),s.cc(11,u,2,0,"div",5),s.Jb()),2&e&&(s.xb(9),s.Xb("ngIf",!i.mobileMenu),s.xb(1),s.Xb("ngIf",i.mobileMenu),s.xb(1),s.Xb("ngIf",!i.mobileMenu))},directives:[d.j],styles:[""]}),e})();function p(e){const i=new Date;return Number(e.value.replace(":","."))<Number(i.getHours()+"."+i.getMinutes())?{invalidTime:!0}:null}function f(e,i){1&e&&(s.Kb(0,"div",23),s.Kb(1,"div",24),s.dc(2,"Adding of ride will be override your today's scheduled ride"),s.Jb(),s.Jb())}function h(e,i){1&e&&(s.Kb(0,"div",23),s.dc(1," Please enter your Employee ID. "),s.Jb())}function v(e,i){1&e&&(s.Kb(0,"div",2),s.Kb(1,"div",3),s.dc(2,"\xa0"),s.Jb(),s.Kb(3,"div",25),s.dc(4," Time should be greater than current time. "),s.Jb(),s.Jb())}let J=(()=>{class e{constructor(e,i){this.rideBuilder=e,this.ridesService=i,this.hideRideDialog=new s.n}ngOnInit(){this.rideScheduled=this.ridesService.rides.find(e=>e.empId===sessionStorage.getItem("username")),this.addRideForm=this.rideBuilder.group({empId:[sessionStorage.getItem("username"),[o.l.required,e=>e.value!==sessionStorage.getItem("username")?{invalidUser:!0}:null]],vehicleType:["bike",o.l.required],vehicleNo:["",o.l.required],vacantSeats:["",o.l.required],time:["",[o.l.required,p]],pickupPoint:["",o.l.required],destination:["",o.l.required],bookedBy:[[]]})}onSubmit(){const e=this.addRideForm.getRawValue();e.time=Number(e.time.replace(":",".")),this.ridesService.addRide(e),this.hideRideDialog.emit(!1)}}return e.\u0275fac=function(i){return new(i||e)(s.Hb(o.b),s.Hb(c))},e.\u0275cmp=s.Bb({type:e,selectors:[["app-add-ride"]],outputs:{hideRideDialog:"hideRideDialog"},decls:56,vars:5,consts:[[1,"add-ride",3,"formGroup","ngSubmit"],["class","row error",4,"ngIf"],[1,"row"],[1,"col","span-1-of-3","label"],["for","empId"],[1,"col","span-2-of-3"],["type","text","formControlName","empId","id","empId"],["for","vehicleType"],["formControlName","vehicleType","id","vehicleType"],["value","bike"],["value","car"],["for","vehicleNo"],["type","text","formControlName","vehicleNo","id","vehicleNo"],["for","vacantSeats"],["type","text","formControlName","vacantSeats","id","vacantSeats"],["for","time"],["type","time","formControlName","time","id","time"],["class","row",4,"ngIf"],["for","pickupPoint"],["type","text","formControlName","pickupPoint","id","pickupPoint"],["for","destination"],["type","text","formControlName","destination","id","destination"],["type","submit",3,"disabled"],[1,"row","error"],[1,"col","span-3-of-3","error","error-header"],[1,"col","span-2-of-3","error"]],template:function(e,i){1&e&&(s.Kb(0,"form",0),s.Rb("ngSubmit",(function(){return i.onSubmit()})),s.cc(1,f,3,0,"div",1),s.Kb(2,"div",2),s.Kb(3,"div",3),s.Kb(4,"label",4),s.dc(5,"Employee ID *"),s.Jb(),s.Jb(),s.Kb(6,"div",5),s.Ib(7,"input",6),s.cc(8,h,2,0,"div",1),s.Jb(),s.Jb(),s.Kb(9,"div",2),s.Kb(10,"div",3),s.Kb(11,"label",7),s.dc(12,"Vehicle type *"),s.Jb(),s.Jb(),s.Kb(13,"div",5),s.Kb(14,"select",8),s.Kb(15,"option",9),s.dc(16,"Bike"),s.Jb(),s.Kb(17,"option",10),s.dc(18,"Car"),s.Jb(),s.Jb(),s.Jb(),s.Jb(),s.Kb(19,"div",2),s.Kb(20,"div",3),s.Kb(21,"label",11),s.dc(22,"Vehicle no *"),s.Jb(),s.Jb(),s.Kb(23,"div",5),s.Ib(24,"input",12),s.Jb(),s.Jb(),s.Kb(25,"div",2),s.Kb(26,"div",3),s.Kb(27,"label",13),s.dc(28,"Vacant seats *"),s.Jb(),s.Jb(),s.Kb(29,"div",5),s.Ib(30,"input",14),s.Jb(),s.Jb(),s.Kb(31,"div",2),s.Kb(32,"div",3),s.Kb(33,"label",15),s.dc(34,"Time *"),s.Jb(),s.Jb(),s.Kb(35,"div",5),s.Ib(36,"input",16),s.Jb(),s.Jb(),s.cc(37,v,5,0,"div",17),s.Kb(38,"div",2),s.Kb(39,"div",3),s.Kb(40,"label",18),s.dc(41,"Pick-up point *"),s.Jb(),s.Jb(),s.Kb(42,"div",5),s.Ib(43,"input",19),s.Jb(),s.Jb(),s.Kb(44,"div",2),s.Kb(45,"div",3),s.Kb(46,"label",20),s.dc(47,"Destination *"),s.Jb(),s.Jb(),s.Kb(48,"div",5),s.Ib(49,"input",21),s.Jb(),s.Jb(),s.Kb(50,"div",2),s.Kb(51,"div",3),s.dc(52,"\xa0"),s.Jb(),s.Kb(53,"div",5),s.Kb(54,"button",22),s.dc(55,"Add"),s.Jb(),s.Jb(),s.Jb(),s.Jb()),2&e&&(s.Xb("formGroup",i.addRideForm),s.xb(1),s.Xb("ngIf",i.rideScheduled),s.xb(7),s.Xb("ngIf",i.addRideForm.controls.empId.invalid&&i.addRideForm.controls.empId.errors.invalidUser),s.xb(29),s.Xb("ngIf",i.addRideForm.controls.time.touched&&i.addRideForm.controls.time.invalid&&i.addRideForm.controls.time.errors.invalidTime),s.xb(17),s.Xb("disabled",!i.addRideForm.valid))},directives:[o.n,o.g,o.d,d.j,o.a,o.f,o.c,o.k,o.i,o.m],styles:[""]}),e})(),K=(()=>{class e{transform(e,...i){const t=[],d=i[0],o=i[1];if(e&&""===d)return e;for(const n of e)n[o]===d&&t.push(n);return t}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=s.Gb({name:"rideFilter",type:e,pure:!0}),e})();function g(e,i){if(1&e){const e=s.Lb();s.Kb(0,"tr"),s.Kb(1,"td"),s.dc(2),s.Jb(),s.Kb(3,"td"),s.dc(4),s.Jb(),s.Kb(5,"td"),s.dc(6),s.Jb(),s.Kb(7,"td"),s.dc(8),s.Jb(),s.Kb(9,"td"),s.dc(10),s.Jb(),s.Kb(11,"td"),s.dc(12),s.Jb(),s.Kb(13,"td"),s.dc(14),s.Jb(),s.Kb(15,"td"),s.Kb(16,"button",6),s.Rb("click",(function(){s.Zb(e);const t=i.$implicit;return s.Tb().bookRide(t.empId,"book")})),s.dc(17,"Book"),s.Jb(),s.dc(18,"\xa0 "),s.Kb(19,"button",6),s.Rb("click",(function(){s.Zb(e);const t=i.$implicit;return s.Tb().bookRide(t.empId,"cancel")})),s.dc(20,"Cancel"),s.Jb(),s.Jb(),s.Jb()}if(2&e){const e=i.$implicit,t=s.Tb();s.xb(2),s.ec(e.empId),s.xb(2),s.ec(e.vehicleType),s.xb(2),s.ec(e.vehicleNo),s.xb(2),s.ec(e.vacantSeats),s.xb(2),s.ec(e.time),s.xb(2),s.ec(e.pickupPoint),s.xb(2),s.ec(e.destination),s.xb(2),s.Xb("disabled",t.isAllowedToBook(e)),s.xb(3),s.Xb("disabled",t.isAllowedToCancel(e))}}function R(e,i){if(1&e){const e=s.Lb();s.Kb(0,"div",7),s.Kb(1,"div",8),s.Kb(2,"div",9),s.dc(3,"Add Ride"),s.Jb(),s.Kb(4,"div",10),s.Rb("click",(function(){return s.Zb(e),s.Tb().showAddRide=!1})),s.Ib(5,"i",11),s.Jb(),s.Jb(),s.Kb(6,"app-add-ride",12),s.Rb("hideRideDialog",(function(i){return s.Zb(e),s.Tb().showAddRide=i})),s.Jb(),s.Jb()}}const I=[{path:"",component:(()=>{class e{constructor(e,i){this.rideService=e,this.router=i,this.showAddRide=!1,this.rideType="",this.sessionUser=sessionStorage.getItem("username")}ngOnInit(){this.availableRides=this.rideService.changeRideCount.pipe()}bookRide(e,i){this.rideService.bookRideAction(e,i)}isAllowedToBook(e){return e.empId===this.sessionUser||!!e.bookedBy.includes(this.sessionUser)||0===e.vacantSeats||void 0}isAllowedToCancel(e){return!e.bookedBy.includes(this.sessionUser)}}return e.\u0275fac=function(i){return new(i||e)(s.Hb(c),s.Hb(n.a))},e.\u0275cmp=s.Bb({type:e,selectors:[["app-available-rides"]],features:[s.wb([],[c])],decls:34,vars:9,consts:[[3,"showAddRide"],[1,"row"],[1,"search-input"],["type","text",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["class","addRide",4,"ngIf"],[3,"disabled","click"],[1,"addRide"],[1,"add-ride-header"],[1,"header-title"],[1,"close-button",3,"click"],[1,"fa","fa-times"],[3,"hideRideDialog"]],template:function(e,i){1&e&&(s.Kb(0,"header"),s.Kb(1,"nav"),s.Kb(2,"app-navbar",0),s.Rb("showAddRide",(function(e){return i.showAddRide=e})),s.Jb(),s.Jb(),s.Jb(),s.Kb(3,"section"),s.Kb(4,"div",1),s.Kb(5,"div",2),s.dc(6," Search "),s.Kb(7,"input",3),s.Rb("ngModelChange",(function(e){return i.rideType=e})),s.Jb(),s.Jb(),s.Jb(),s.Kb(8,"div",1),s.Kb(9,"table"),s.Kb(10,"tr"),s.Kb(11,"th"),s.dc(12,"Emp ID"),s.Jb(),s.Kb(13,"th"),s.dc(14,"Vehicle Type"),s.Jb(),s.Kb(15,"th"),s.dc(16,"Vehicle No."),s.Jb(),s.Kb(17,"th"),s.dc(18,"Vacant Seats"),s.Jb(),s.Kb(19,"th"),s.dc(20,"Time"),s.Jb(),s.Kb(21,"th"),s.dc(22,"Pick-up Point"),s.Jb(),s.Kb(23,"th"),s.dc(24,"Destination"),s.Jb(),s.Kb(25,"th"),s.dc(26,"Action"),s.Jb(),s.Jb(),s.cc(27,g,21,9,"tr",4),s.Ub(28,"rideFilter"),s.Ub(29,"async"),s.Jb(),s.Jb(),s.Kb(30,"div",1),s.cc(31,R,7,0,"div",5),s.Jb(),s.Jb(),s.Kb(32,"footer"),s.dc(33," \xa9 Copyright 2020 Infrrd Inc. All Rights Reserved.\n"),s.Jb()),2&e&&(s.xb(7),s.Xb("ngModel",i.rideType),s.xb(20),s.Xb("ngForOf",s.Wb(28,3,s.Vb(29,7,i.availableRides),i.rideType,"vehicleType")),s.xb(4),s.Xb("ngIf",i.showAddRide))},directives:[m,o.a,o.f,o.h,d.i,d.j,J],pipes:[K,d.b],styles:[""]}),e})(),canActivate:[(()=>{class e{constructor(e){this.router=e}canActivate(e,i){if(""!==sessionStorage.getItem("username"))return!0;this.router.navigate([""])}}return e.\u0275fac=function(i){return new(i||e)(s.Ob(n.a))},e.\u0275prov=s.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]}];let w=(()=>{class e{}return e.\u0275mod=s.Fb({type:e}),e.\u0275inj=s.Eb({factory:function(i){return new(i||e)},imports:[[n.b.forChild(I)],n.b]}),e})(),y=(()=>{class e{}return e.\u0275mod=s.Fb({type:e}),e.\u0275inj=s.Eb({factory:function(i){return new(i||e)},imports:[[d.c,o.j,o.e,w]]}),e})()}}]);